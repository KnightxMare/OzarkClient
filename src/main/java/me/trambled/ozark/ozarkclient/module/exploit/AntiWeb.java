package me.trambled.ozark.ozarkclient.module.exploit;

import me.trambled.ozark.ozarkclient.module.Category;
import me.trambled.ozark.ozarkclient.module.Module;
import me.trambled.ozark.ozarkclient.module.Setting;
import net.minecraft.client.Minecraft;
import net.minecraft.entity.Entity;

import java.lang.reflect.Field;

// xanax
public class AntiWeb extends Module {

    public AntiWeb() {
        super(Category.EXPLOIT);

        this.name        = "Anti Web";
        this.tag         = "AntiWeb";
        this.description = "stops being slowed down by web";
    }

    Setting mode = create("Mode", "AntiWebMode", "Vanilla", combobox("Vanilla", "Down", "Both"));

    public String web_str = is_not_obf() ? "isInWeb" : "field_70134_J";

    @Override
    public void update() {
        if (full_null_check()) return;
        if (mode.in("Vanilla") || mode.in("Both")) {
            try {
                final Field isInWeb = Entity.class.getDeclaredField(web_str);
                isInWeb.setAccessible(true);
                isInWeb.setBoolean(mc.player, false);
            } catch (Exception e) {
                this.set_disable();
                e.printStackTrace();
            }
        }
        if (mode.in("Down") || mode.in("Both")) {
            mc.player.motionY -= 3;
        }
    }

    public boolean is_not_obf() {
        try {
            return Minecraft.class.getDeclaredField("instance") != null;
        } catch (Exception e) {
            return false;
        }
    }

}
