package me.trambled.ozark.ozarkclient.module.exploit;

import me.trambled.ozark.ozarkclient.module.Setting;
import me.trambled.ozark.ozarkclient.module.Category;
import me.trambled.ozark.ozarkclient.module.Module;
import me.trambled.ozark.ozarkclient.util.BlockUtil;
import me.trambled.ozark.ozarkclient.util.TimerUtil;
import net.minecraft.init.Blocks;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3d;

public class Scaffold extends Module {

    public Scaffold() {
        super(Category.EXPLOIT);

        this.name = "Scaffold";
        this.tag = "Scaffold";
        this.description = "Places block.";
    }

    Setting delay = create("MS Delay", "ScaffoldDelay",5, 0, 100);
    Setting tower = create("Tower", "ScaffoldTower",true);
    Setting rotate = create("Rotate", "ScaffoldRotate",false);
    Setting swing = create("Swing", "ScaffoldAutoBuilderSwing", "Mainhand", combobox("Mainhand", "Offhand", "Both", "None"));

    TimerUtil timer = new TimerUtil();

    @Override
    protected void enable() {
        timer.reset();
    }

    @Override
    protected void disable() {
        timer.reset();
    }
    
    @Override
    public void update() {
        if (full_null_check()) return;

        if (!timer.passed(delay.get_value(1))) {
            return;
        }

        timer.reset();

        Vec3d vec = new Vec3d(mc.player.posX, mc.player.posY, mc.player.posZ);

        BlockPos blockPos = new BlockPos(vec).down();
        BlockPos playerPos = new BlockPos(vec);

        BlockUtil.placeBlock(blockPos, rotate.get_value(true), false, swing);

        if (tower.get_value(true) && mc.gameSettings.keyBindJump.isKeyDown()) {
            mc.player.motionY = 0.4;
            
            if (mc.world.getBlockState(playerPos).getBlock() != Blocks.AIR && !mc.player.onGround) {
                mc.player.motionY = -1.0;
            }
        }
    }
}
