package me.travis.wurstplus.wurstplustwo.hacks.exploit;

import me.travis.wurstplus.wurstplustwo.guiscreen.settings.WurstplusSetting;
import me.travis.wurstplus.wurstplustwo.hacks.WurstplusCategory;
import me.travis.wurstplus.wurstplustwo.hacks.WurstplusHack;
import me.travis.wurstplus.wurstplustwo.util.WurstplusBlockUtil;
import me.travis.wurstplus.wurstplustwo.util.WurstplusTimer;
import net.minecraft.init.Blocks;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.Vec3d;

public class Scaffold extends WurstplusHack {

    public Scaffold() {
        super(WurstplusCategory.WURSTPLUS_EXPLOIT);

        this.name = "Scaffold";
        this.tag = "Scaffold";
        this.description = "places block";
    }

    WurstplusSetting delay = create("MS Delay", "Delay",5, 0, 100);
    WurstplusSetting tower = create("Tower", "Tower",true);
    WurstplusSetting rotate = create("Rotate", "Rotate",false);
    WurstplusSetting swing = create("Swing", "AutoBuilderSwing", "Mainhand", combobox("Mainhand", "Offhand", "Both", "None"));

    WurstplusTimer timer = new WurstplusTimer();

    @Override
    protected void enable() {
        timer.reset();
    }

    @Override
    protected void disable() {
        timer.reset();
    }
    
    @Override
    public void update() {
        if (nullCheck()) return;

        if (!timer.passed(delay.get_value(1))) {
            return;
        }

        timer.reset();

        Vec3d vec = new Vec3d(mc.player.posX, mc.player.posY, mc.player.posZ);

        BlockPos blockPos = new BlockPos(vec).down();
        BlockPos playerPos = new BlockPos(vec);

        WurstplusBlockUtil.placeBlock(blockPos, rotate.get_value(true), false, swing);

        if (tower.get_value(true) && mc.gameSettings.keyBindJump.isKeyDown()) {
            if (mc.player.onGround) {
                mc.player.motionY = 0.4;
            }
            if (mc.world.getBlockState(playerPos).getBlock() != Blocks.AIR && !mc.player.onGround) {
                mc.player.motionY = -1.0;
            }
        }
    }
}
